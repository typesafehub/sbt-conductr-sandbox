jdk: openjdk7
language: scala

env:
  global:
#  DOCKER_VERSION: 1.8.1
    - DOCKER_HOST=tcp://$HOST_IP:2375
    - DOCKER_PORT_RANGE=2400:2500
#    - SLIRP_PORTS=$(seq 2375 2500)

cache:
  directories:
    - $HOME/.ivy2/cache
    - $HOME/.sbt/boot/

#before_install:
#  - sudo sh -c "apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D"
#  - sudo sh -c "echo deb https://apt.dockerproject.org/repo ubuntu-precise main > /etc/apt/sources.list.d/docker.list"
#  - echo exit 101 | sudo tee /usr/sbin/policy-rc.d
#  - sudo chmod +x /usr/sbin/policy-rc.d

install:
  - curl -sSL https://get.docker.com/ | sudo sh
  - sudo sudo usermod -aG docker "$USER"

#install:
#  - sudo apt-get -qqy update
#  - sudo apt-get -qqy purge lxc-docker*
#  - sudo apt-get -qqy install docker-engine slirp
#  - sudo sudo usermod -aG docker "$USER"
#  - git clone git://github.com/cptactionhank/sekexe

#before_script:
# - "sekexe/run 'mount -t tmpfs -o size=8g tmpfs /var/lib/docker && docker -d -H tcp://0.0.0.0:2375' &"
# - "while ! docker info &> /dev/null ; do sleep 1; done"

script:
  # Test script
  - sbt scripted
  # Avoid unnecessary chache updates
  - find $HOME/.sbt -name "*.lock" | xargs rm
  - find $HOME/.ivy2 -name "ivydata-*.properties" | xargs rm